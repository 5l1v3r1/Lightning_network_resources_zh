## 什麼是閃電網絡?

閃電網絡（LN）這一概念由Joseph Poon和Thaddeus Dryja在2015年提出。該項目的主要想法是設計一種鏈下支付協議，用於解決比特幣面臨的可擴展性問題。同時，這個概念也可以用於其他的加密貨幣。

閃電網絡啟發於比特幣以及許多其他加密貨幣所面臨的限制。目前，比特幣的網絡每秒只能處理2到7個事務（TPS）。隨著加密貨幣生態系統的發展以及更多的參與者加入網絡，廣播到區塊鏈的交易數量可能會增加。隨著網絡越來越擁擠，區塊鏈的整體性能會受到影響，這大大降低了比特幣作為全球數字貨幣的實際可用性。在這種情況下，閃電網絡的創建是為了減輕比特幣的網絡擁塞。

## 閃電網絡是如何工作的？

閃電網絡由一個基於比特幣的鏈下傳輸網絡組成。該系統在點對點（P2P）的層面上工作，其可用性依賴於雙向支付通道的創建。用戶通過此通道可以進行無縫的加密貨幣交易。

在雙方決定開通一個支付通道後，他們就可以在錢包中來回傳遞資金。儘管建立支付通道的過程涉及鏈上交易，所有在通道內發生的交易都是鏈下的，不需要全球性的整體共識。這就意味著這些交易可以通過智能合約快速執行，從而達到更低的手續費和更高的TPS（每秒交易速率）。

為了創建一個支付通道，雙方需要設置一個多重簽名錢包並在其中存儲一些資金。存儲在多重錢包上的資金只有在雙方均提供私鑰的情況下才能動用（兩個或兩個以上，取決於具體情況）。這就意味著一方無法在未經另一方同意的情況下打開錢包。

舉個例子來說，讓我們假設Alice想要使用閃電網絡和Bob交易比特幣。首先，他們要用多重簽名錢包設置一個支付通道。支付通道類似於一個智能合約，多重錢包類似於一個保險箱，其中存放了待交易的資金。在支付通道的有效期內Alice和Bob雙方可以進行任意次鏈下交易。

緊接著每次交易後，Alice和Bob都會簽名並且更新他們的資產記錄副本，該副本記錄了每個人擁有的比特幣數量。當他們完成了全部交易後，他們可以關閉支付通道並把自己的資產記錄廣播到比特幣全網。閃電網絡的智能合約會確保他們根據最新的資產記錄接收比特幣。

總結一下，設計的雙方只需要跟比特幣全網進行兩次交互。一次是創建支付通道，而另一次是關閉，這意味著在支付通道內發生的所有其他交易都不會直接與主鏈交互。

## 網絡路由

即便雙方沒有建立直接的支付通道，他們仍然通過互聯的支付通道發送和接收比特幣。這意味著Alice可以在不直接建立支付通道的情況下向Charlie付款，只要他們之前存在著餘額足夠的網絡路由連接。

因此，如果Alice和Bob，Bob和Charlie之間有一個開放的支付通道，Alice可以通過Bob向Charlie支付。支付路由可能涉及許多閃電網絡節點，而智能合約將自動搜索最短的可用路徑。

 

### 闪电网络的优点

* 閃電網絡項目致力於可擴展性問題的鏈下解決方案。如果成功，它可以減少比特幣網絡的流量。
* 通過使用雙向支付通道，閃電網絡可以實現近乎實時的交易。
* 閃電網絡可能適用於小額支付，因為它允許傳輸最小至1 satoshi的值。此外，自動化的小額支付可以在機器對機器的經濟中實現，其中在電子設備之間進行的交易不需要人為乾預。

## 閃電網絡的局限性

* 與鏈上交易不同，如果接收方不在線上無法進行閃電網絡支付。
* 網絡的參與者可能需要定期監控支付通道，以保證他們的資金安全這種風險可以通過外包監控服務來克服）。
* 閃電網絡不適合大額付款。由於網絡依賴於許多的多簽名錢包（基本上是共享的錢包），因此很可能沒有足夠的餘額來充當大額支付的中間人。
* 創建和關閉支付通道涉及到鏈上交易，這通常需要手動工作和更高的交易費用。

 

## 閃電網絡什麼時候上線？

如果我們考慮Lightning Labs宣布的主網測試版本，閃電網絡的發布日期是2018年3月15日。但是，官方尚未正式宣布正式版本，因為它沒有在比特幣區塊鏈之上有效實現。

自測試版發布以來，閃電網絡節點和支付通道的數量大幅增加。截至2018年11月，Grafana面板報告了超過12,500個建立的支付通道。 

節點和支付通道的共同作用使得閃電網絡成為一個有趣的可擴展性問題解決方案。測試版已經進行了大量實驗，但是其效率尚未得到證實。然而，閃電網絡確實具有改善比特幣和加密貨幣生態系統的巨大潛力。